// Centralized status + helpers for UI guards
export const STATUS = {
  NEW: "NEW",
  PROVIDER_ACCEPTED: "PROVIDER_ACCEPTED",
  REJECTED: "REJECTED",
  MECHANIC_ASSIGNED: "MECHANIC_ASSIGNED",
  AWAITING_ESTIMATE_APPROVAL: "AWAITING_ESTIMATE_APPROVAL",
  ESTIMATE_APPROVED: "ESTIMATE_APPROVED",
  EN_ROUTE: "EN_ROUTE",
  IN_PROGRESS: "IN_PROGRESS",
  COMPLETED: "COMPLETED",
  CANCELLED: "CANCELLED",
};

export const TRANSITIONS = {
  [STATUS.NEW]: [STATUS.PROVIDER_ACCEPTED, STATUS.REJECTED, STATUS.CANCELLED],
  [STATUS.PROVIDER_ACCEPTED]: [STATUS.MECHANIC_ASSIGNED, STATUS.CANCELLED],
  [STATUS.MECHANIC_ASSIGNED]: [
    STATUS.AWAITING_ESTIMATE_APPROVAL,
    STATUS.CANCELLED,
  ],
  [STATUS.AWAITING_ESTIMATE_APPROVAL]: [
    STATUS.ESTIMATE_APPROVED,
    STATUS.CANCELLED,
  ],
  [STATUS.ESTIMATE_APPROVED]: [STATUS.EN_ROUTE, STATUS.CANCELLED],
  [STATUS.EN_ROUTE]: [STATUS.IN_PROGRESS, STATUS.CANCELLED],
  [STATUS.IN_PROGRESS]: [STATUS.COMPLETED, STATUS.CANCELLED],
  [STATUS.REJECTED]: [],
  [STATUS.COMPLETED]: [],
  [STATUS.CANCELLED]: [],
};

export const isValidStatus = (s) => Object.values(STATUS).includes(s);
export const canTransition = (from, to) =>
  (TRANSITIONS[from] || []).includes(to);
